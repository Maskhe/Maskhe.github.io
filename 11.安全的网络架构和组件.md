# 重点

- 知道OSI模型
- 知道封装
- 知道网络容器名字
- 知道协议分析器
- 理解MAC地址
- 知道路由协议
- 理解TCP/IP模型
- 知道常见的应用层协议
- 理解传输层协议
- 理解DNS
- 理解DNS投毒
- 理解域名劫持
- 理解typosquatting
- 知道IP
- 知道网络层协议
- 知道ARP
- 能够列出安全通信协议的案例
- 理解多层协议
- 知道融合协议
- 知道VoIP
- 知道各种类型和目的的网络分段
- 知道微分段
- 定义SDN
- 理解各种无线技术
- 知道SSID
- 定义WPA2
- 理解WPA3
- 定义SAE
- 了解现场调查
- 理解WPS攻击
- 理解MAC过滤
- 了解天线类型
# OSI模型

## OSI 模型的历史

OSI 模型直到 1970 年代后期才被开发出来（直到 1984 年才正式作为标准 ISO 7498 发布）。

## OSI 功能

![](attachments/Pasted%20image%2020241206183133.png)

## 封装和解封装

封装是指在将每一层从上一层接收的数据移交给下一层之前，向每一层接收的数据添加页眉（可能还有页脚）。当数据通过 OSI 模型层从 Physical 向上移动到 Application 时发生的反向操作称为解封装。

![](attachments/Pasted%20image%2020241205181624.png)

OSI不同层网络容器的名字：

![](attachments/Pasted%20image%2020241209150849.png)


## OSI各层介绍

### 应用层

应用层负责将用户应用程序、网络服务或操作系统与协议栈连接起来。值得注意的是，软件应用程序不在这一层，相反，传输文件、交换消息、连接到远程终端等所需的协议和服务都可以在这里找到。

### 表示层

表示层（第 6 层）负责将数据转换为遵循 OSI 模型的任何系统都可以理解的格式。它对数据施加通用或标准化的结构和格式规则。表**示层还负责加密和压缩。**

### 会话层

会话层（第 5 层）负责建立、维护和终止两台计算机之间的通信会话。它管理会话规则或会话控制（单工、半双工、全双工），建立用于分组和恢复的检查点，并重新传输自上次验证检查点以来失败或丢失的 PDU。

### 传输层

传输层（第 4 层）负责管理连接的完整性并控制会话。传输层在节点（也称为设备）之间建立通信，并定义会话的规则。会话规则指定每个段可以包含的数据量、如何验证消息完整性以及如何确定数据是否已丢失。会话规则是通过握手过程建立的。

### 网络层

网络层（第 3 层）负责逻辑寻址和执行路由。当地址由软件或协议分配和使用，而不是由硬件提供和控制时，就会发生逻辑寻址。网络层的数据包标头包括源 IP 地址和目标 IP 地址。

### 数据链路层

数据链路层（第 2 层）负责格式化数据包以进行传输。正确的格式由硬件、拓扑和网络技术（如以太网 （IEEE 802.3））决定。

### 物理层

物理层（第 1 层）将帧转换为比特，以便通过物理连接介质传输，反之亦然，用于接收通信

# TCP/IP 模型

TCP/IP模型和OSI模型的对比：

![](attachments/Pasted%20image%2020241209152044.png)

# 分析网络流量

**协议分析器（protocol analyzer）**：协议分析器是用于检查网络流量内容的工具。协议分析器可以是安装在典型主机系统上的专用硬件设备或软件。

**混杂模式（promiscuous mode）**：在混杂模式下，NIC 会忽略以太网帧的目标 MAC 地址，并收集到达接口的每个帧。

# 常见应用层协议

Telnet：端口23
FTP：端口20/21
TFTP（Trivial File Transfer Protocol）：端口69，这是一个网络应用程序，支持不需要身份验证的文件交换。用于托管网络设备配置文件，并支持多播。不应使用 TFTP
SMTP（）：端口25
POP3（）：端口110
IMAP（）：端口143
DHCP（）：端口67/68
HTTP（）：端口80
HTTPS（）：端口443
LPD（Line Printer Daemon）： TCP端口515
X Window：TCP端口6000–6063
NFS（）：TCP端口2049
SNMP（）：UDP端口 161、162

# 传输层协议

TCP协议三次握手：

![](attachments/Pasted%20image%2020241209153932.png)

TCP协议四次挥手：

![](attachments/Pasted%20image%2020241209154007.png)

TCP协议与UDP协议对比：

|        | TCP                                                                                                                                 | UDP          |
| :----- | :---------------------------------------------------------------------------------------------------------------------------------- | :----------- |
| 是否面向连接 | 是                                                                                                                                   | 否            |
| 服务对象   | 一对一                                                                                                                                 | 一对多          |
| 传输可靠性  | 可靠(可靠性体现在[三次握手](https://so.csdn.net/so/search?q=%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B&spm=1001.2101.3001.7020)和四次挥手上)，数据可以无差错、不丢失重复； | 不可靠，尽最大努力交付； |

# 域名系统

域名：
IP地址：
MAC地址：

DNS协议将人类友好的域名转换为对应的IP地址。
ARP协议将IP地址转换为MAC地址。

一个全限定域名（FQDN）由以下部分组成：

- 顶级域名（Top-level domain ，TLD）：www.google.com中的com
- 注册域名（Registered domain name）：www.google.com中的google
- 子域名（Subdomain(s) or hostname）：www.google.com中的www


## DNS投毒

当一个域名想要通过DNS系统查询对应的IP时，通常要经过以下步骤：

1. 查询本地缓存，包括hosts文件内容
2. 发送一个dns请求到dns服务器
3. 向任何可能的本地子网 DNS 服务器发送广播查询。（此步骤未得到广泛支持）

DNS投毒就是让客户机获得一个错误的 域名-IP地址 对，有多种方式可以实现这一点：

- **搭建流氓DNS服务器**：恶意 DNS 服务器可以侦听网络流量中与目标站点相关的任何 DNS 查询或特定 DNS 查询。然后，流氓 DNS 服务器向客户端发送包含虚假 IP 信息的 DNS 响应
- **实施DNS缓存投毒**：攻击DNS缓存服务器，向其zone文件放入错误的dns解析信息
- **DNS域欺骗（DNS Pharming）**：另一种与 DNS 中毒和/或 DNS 欺骗密切相关的攻击是 DNS 域欺骗。域欺骗是将有效网站的 URL 或 IP 地址恶意重定向到虚假网站。域欺骗通常通过修改系统上的本地主机文件或通过中毒或欺骗 DNS 解析来实现。
- **修改hosts文件**：
- **损坏IP配置**：损坏 IP 配置可能会导致客户端具有错误的 DNS 服务器定义（即 DNS 查找地址更改）。DNS 服务器地址通常通过 DHCP 分发给 clients，但也可以静态分配。更改客户端 DNS 服务器查找地址的攻击可以通过破坏 DHCP 或通过脚本来执行
- **DNS查询欺骗**：当黑客能够窃听客户端对 DNS 服务器的查询时，就会发生 DNS 查询欺骗攻击。然后，攻击者发回包含虚假信息的回复。为了成功，false 回复必须包含从查询克隆的正确 QID
- **使用代理伪造**：虽然严格来说不是 DNS 问题，但如果客户端必须解析代理的域名才能使用代理，则可以通过 DNS 实施代理伪造攻击。攻击可以修改本地配置、配置脚本或路由表，以将通信重定向到虚假代理。此方法仅适用于 Web 通信（或使用代理的其他服务或协议）。流氓代理服务器可以修改流量数据包，将请求重新路由到黑客想要的任何站点

防御DNS投毒：

- 限制从内部 DNS 服务器到外部 DNS 服务器的区域传输。这可以通过阻止入站 TCP 端口 53（区域传输请求）和 UDP 端口 53（查询）来实现。
- 要求内部客户端通过内部 DNS 解析所有域名。这将要求您阻止出站 UDP 端口 53（用于查询），同时保持开放的出站 TCP 端口 53（用于区域传输）。
- 限制内部 DNS 服务器从中提取区域传输的外部 DNS 服务器。
- 部署网络入侵检测系统 （NIDS） 以监视异常的 DNS 流量。
- 正确强化专用网络中的所有 DNS、服务器和客户端系统。
- 使用 DNSSEC 保护您的 DNS 基础设施。
- 在支持的所有客户端上使用 DoH 或 ODoH

说说DNSSEC、DoH、ODoH是怎么确保DNS查询的安全性的
## 域名劫持

有时候，当原始所有者的注册到期后，其他人立即注册域名，这被称为域名劫持。

- **拼写错误（Typosquatting）**：拼写错误是一种利用用户错误输入预期资源的域名或 IP 地址的做法
- **同形异义词攻击（Homograph Attack）**：使用其他和原字符相似的字符替换到域名中的某个字符，欺骗用户的眼睛，让用户误认为是合法域名。
- **URL劫持**：URL 劫持是指显示看起来像知名产品、服务或网站的链接或广告，但点击后会将用户重定向到其他位置、服务或产品的做法。
- **点击劫持（Clickjacking）**：点击劫持是一种将用户在网页上的点击或选择重定向到其他通常是恶意目标而不是预期和所需位置的方法

# IP网络

## IPv4和IPv6

IPv4 32位
IPv6 128位

在同一网络中使用Ipv6 ipv4的方法：

- **双堆栈(dual stack)**
- **隧道(tunneling)**
- **NAT-PT**

## IP分类

A类：0 开头   0-126
B类：10开头   128-191
C类：110开头 192-223
D类：1110开头 224-239
F类：11110开头 240-255

![](attachments/Pasted%20image%2020241217173641.png)

## ICMP

Internet 控制消息协议 （ICMP） 用于确定网络或特定链路的运行状况。ICMP 由 ping、traceroute、pathping 和其他网络工作管理工具使用

- 死亡之ping：
- smurf攻击：
- ping泛洪攻击：

![](attachments/Pasted%20image%2020250728145110.png)

## IGMP

Internet 组管理协议 （IGMP） 允许系统支持多播。

# ARP协议

MAC地址48位。

ARP缓存投毒：

- ARP cache poisoning or ARP spoofing is caused by an attacker responding with falsified replies
- Another form of ARP poisoning uses gratuitous ARP or unsolicited ARP replies
- A third form of ARP cache poisoning is to create static ARP entries

arp欺骗、投毒防御方法：
- 加强交换机端口安全措施
- 使用静态arp记录

MAC地址泛洪攻击（Mac Flooding）：是由于交换机的脆弱配置，可以通过配置交换机的mac自学习最大条数进行防御。

# 安全通信协议

**IPsec**： https://blog.csdn.net/maimang1001/article/details/135228551
**Kerberos**：Kerberos 为用户提供单点登录 （SSO） 解决方案，并为登录凭据提供保护
**ssh**：Secure Shell （SSH） 是端到端加密技术的一个很好的示例。此安全工具可用于加密许多纯文本实用程序（例如 rcp、rlogin 和 rexec），用作协议加密器（例如 SFTP），并用作跨端口模式 VPN（即，仅限主机到主机和链接加密）
**signal protocol**：这是一种加密协议，可为语音通信、视频会议和短信服务提供端到端加密
**s-rpc**：S-RPC 是一种用于跨网络服务通信的身份验证服务，只是一种防止在远程系统上未经授权执行代码的方法。
**TLS**：这是一种在 OSI 第 4 层运行的加密协议（通过加密 TCP 通信的有效负载）。虽然它主要用于以 HTTPS 的形式加密 Web 通信，但它可以加密任何应用程序层协议。传输层安全性 （TLS） 取代了安全套接字层

注意：TLS和SSL会话是不兼容的

# 多层协议的含义

TCP/IP 是一种多层协议。TCP/IP 从其多层设计中获得了几个好处，特别是与其封装机制有关。例如，当 Web 服务器和 Web 浏览器之间通过典型网络连接进行通信时，HTTP 封装在 TCP 中，而 TCP 又封装在 IP 中，而 IP 又封装在以太网中。

`[ Ethernet [ IP [ TCP [ HTTP [Payload] ] ] ] ]`

多层协议的优势：

- 可以在更高层使用多种协议
- 加密可以合并到各个层。
- 支持复杂网络结构的灵活性和弹性

缺点：

- 允许使用隐蔽通道
- 可以绕过过滤器。
- 可以越过逻辑上施加的网段边界

## 融合协议（Converged Protocols）

**融合协议是专用协议或专有协议与标准协议（如 TCP/IP 套件中的协议）的合并**。**融合协议的主要好处是能使用现有的 TCP/IP 支持网络基础设施来托管特殊服务或专有服务，不需要独立部署备用网络硬件**

一些融合协议的案例：

- **存储区域网络（SAN）**：用于将各种存储设备整合和管理到一个整合的网络可访问存储容器中，将数据存储信号封装或聚合到TCP/IP通信中，增强网络存储设备读写能力。在某些情况下，SAN 可能会实施重复数据删除（deduplication），以便通过不保留同一文件的多个副本来节省空间。但是，如果保留的原件损坏，有时会导致数据丢失。
- **多协议标签交换(Multiprotocol Label Switching, MPLS) MPLS** 是一种高吞吐率、高性能网络技术，它基于短路径标签（而不是更长的网络地址）来引导网络上的数据。相比于比传统的基于 ip 的路由过程，这种技术节省了大量时间，但可能非常复杂。**MPLS通过封装支持大范围的协议，不仅仅局限于TCP/IP及相关兼容协议**。
- I**nternet 小型计算机系统接口 （iSCSI） 是一种基于 IP 的网络存储标准，运行在第 3 层。** 该技术可用于通过 LAN、WAN 或公共互联网连接实现不受位置限制的文件存储、传输任务和检索。**iSCSI 通常被视为光纤通道的低成本替代方案**
- **以太网光纤通道(Fibre Channel over Ethernet, FCoE)，光纤通道是一种网络数据存储解决方案(SAN NAS) ，允许高达 128 Gbps 的文件件传输速率。** **它在第2层运行**，被设计用于光纤电缆；后来增加了对铜缆的支持，以提供更便宜的选择

其他可能被视为融合技术示例的概念包括 VPN、SDN、云、虚拟化、SOA、微服务、基础设施即代码 （IaC） 和无服务器架构。

## VoIP（Voice over Internet Protocol）

IP 语音 （VoIP） 是一种隧道机制，它将音频、视频和其他数据封装到 IP 数据包中，以支持语音呼叫和多媒体协作。**VoIP 被认为是一种融合协议**，因为它将音频（和视频）封装技术（作为应用层协议运行）与已建立的多层 TCP/IP 协议栈相结合。

针对VoIP的攻击：

- **伪造来电人**：使用 VoIP 工具可以很容易地伪造呼叫方 ID，因此黑客可以执行电话钓鱼（VoIP 网络钓鱼）或 Internet 电话垃圾 （Spam over Internet Telephony，SPIT） 攻击。
- **攻击呼叫管理系统**：呼叫管理器系统和 VoIP 电话本身可能容易受到主机操作系统攻击和 DoS 攻击。尤其是当宿主机或者固件存在漏洞的时候更容易被利用。
- **中间人攻击**：攻击者可能能够通过欺骗呼叫管理器或端点连接协商和/或响应来执行 MitM/on-path 攻击。
- 根据部署情况，**在与桌面和服务器系统相同的交换机上部署 VoIP 电话也存在相关风险。这可能允许 802.1X 身份验证伪造以及 VLAN 和 VoIP 跳转（VoIP hopping）**
- **未加密风险**：由于 VoIP 流量只是网络流量，因此通常可以通过解码未加密的VoIP流量来监听VoIP通信。


**Secure Real-Time Transport Protocol or Secure RTP (SRTP) is a security improvement over the Real-Time Transport Protocol (RTP) that is used in many VoIP communications. SRTP aims to minimize the risk of DoS, on-path attacks, and other VoIP exploits through robust encryption and reliable authentication**。

## 软件定义网络

SDN将基础设施层（即数据平面和转发平面，硬件及相关配置）与控制层（数据传输管理的网络服务）分离。控制平面使用协议来决定向何处发送流量，而数据平面包含决定是否转发流量的规则。SDN取代了传统组网方案，通过SDN控制器对不同厂商的网络设备进行统一管理，灵活、便利、具有成本效益。

- 虚拟SAN：由于传统SAN的硬件复杂、成本高，可通过虚拟源调化网络创建SAN。
- 软件定义存储（SDS）：一种策略驱动的存储管理和资配解决方案，独立于实际的底层存储硬件。
- 软件定义广域网（SDWAN）：可用于管理远程数据中心、远程位置和跨WAN链路的云服务之间的连接和控制服务。

从技术上讲，SDN 是通过将控制平面与数据平面分离而实现的。“平面”是一个网络术语，指的是联网过程所处位置的一种抽象概念。**控制平面是引导网络流量的联网过程，而数据平面是穿越网络的实际数据**。控制平面通过建立网络路由并传达应使用哪些协议来完成这个过程。

打个比方，控制平面是在城市道路交叉口工作的交通信号灯的集合。数据平面则更像是在道路上行驶、在路口停下并遵守交通信号灯的汽车。

在仅使用物理硬件的网络设置中，必须逐一配置各个路由器或交换机。控制平面与数据平面和底层网络硬件紧密相连。使用 SDN 时，控制平面与数据平面和实际硬件是分离的，从而能够从中央位置配置控制平面。
# 微分段

网络分段有以下好处：

- **提高网络性能**：网络分段可以通过组织方案提高性能，在该方案中，经常通信的系统位于同一段中。此外，划分广播域可以显著提高大型网络的性能。
- **减少通信问题**：网络分段通常可以减少拥塞并包含通信问题，例如广播风暴。
- **提高安全性**：网络分段还可以通过隔离流量和用户对他们获得授权的那些分段的访问来提高安全性。

网络分段可以通过**VLAN、路由器、防火墙**实现。

几种网络分段的概念或思想：

- **创建带外路径（out-of-band pathway）**：**为流量创建一个单独和独特的网络结构，否则会干扰生产网络**，或者如果将其放置在生产网络上，其本身可能会面临风险，如SAN、VoIP、备份数据、补丁分发、管理操作等。
- **微分段（Microsegmentation）**： 微隔离将内部网络划分为多个子区域，可能小到单个设备，例如高价值服务器或甚至客户端。每个区域通过内部分段防火墙（ISFW）、子网、VLAN或其他虚拟网络解决方案与其他区域分开。区域之间的任何通信都经过过滤，可能需要进行身份验证、会话加密、访问控制等。
- **虚拟可扩展局域网（VXLAN）**：VXLAN可使VLAN跨子网和地理距离进行扩展，可用于实现微隔离。VLAN本来只能工作在第二层，但是VXLAN打破了这一限制。

VLAN参考文章： https://cloud.tencent.com/developer/article/1412795
# 无线网络

802.11 是无线网络通信的 IEEE 标准。

![](attachments/Pasted%20image%2020250812105524.png)


- wifi的**ad hoc模式**即点对点wifi，意味着任何两个设备都可以在没有集中接入点的情况下进行通信
- wifi **direct是升级版的ad hoc模式**，能支持WPA2和WPA3，ad hoc只支持WEP
- **基础设施模式意味着需要无线接入点（WAP）**

基础设施模式（infrastructure mode）有几种变种：

1. s**tandalone mode**：独立模式部署是指存在无线客户端相互连接但不连接到任何有线资源的WAP
2. **wired extension mode**：有线扩展模式部署是指WAP充当连接点，将无线客户端链接到有线网络。
3. **enterprise extended mode**：企业扩展模式部署是指使用多个无线接入点 （WAP） 将大型物理区域连接到同一有线网络。每个WAP将使用相同的扩展服务集标识符（ESSID），以便客户端可以在保持网络连接的同时漫游该区域，即使其无线网卡的通信从一个WAP更改为另一个WAP。
4. **bridge mode**：网桥模式部署是指使用无线连接来链接两个有线网络。这通常使用专用的无线网桥，并在有线网桥不方便的情况下使用，例如在楼层或建筑物之间连接网络时。

fat AP和thin AP：

- fat ap是一个完全自主管理的无线系统基站
- thin ap只是一个无线发射器，必须从另一个独立的集中控制台进行管理

## 保护SSID

无线网络被分配一个服务集标识符 （Service Site Identifier, SSID），以区分一个无线网络与另一个无线网络。

802.11 是无线网络通信的 IEEE 标准。

- ESSID 是使用 WAP 时无线网络的名称
- **BSSID 是基站的 MAC 地址，用于区分多个支持 ESSID 的基站**
- **独立服务集标识符 （ISSID） 由 Wi-Fi Direct 或 ad hoc 模式使用。**

WAP(wireless access point)通过广播ssid的方式告诉客户端自己的存在。

禁用SSID可使其不进行广播，但仍可以使用无线工具探测到，因此不是真正的安全机制，应采用WPA2或WPA3加强安全性。

## 无线信道（channels）

在无线信号的指定频率中细分通信路径就是信道（channels）。当同一区域有多个WAP时（使用2.4GHz），使用同一个信道可能会影响无线网络速度，应根据WAP物理部署位置进行信道规划。5GHz可以避免这种信道重叠和干扰问题，但其传输距离没有2.4GHz远，6GHz亦是如此。

信道，也称作通道或频段，是以无线信号作为传输载体的数据信号传送通道。

2.4G频段的工作频率为2.4-2.4835GHz，这83.5MHz频带划分为13个信道，各信道中心频率相差5MHz，向上向下分别扩展11MHz，信道带宽22MHz。中国采用欧洲/ETSI标准，使用1-13信道。如图所示

![](attachments/Pasted%20image%2020241210114026.png)

2.4Ghz穿透性更强，速率慢，抗干扰性差
5Ghz穿透性差，速率快，抗干扰性强
## 进行现场勘测（site survey）

**无线蜂窝（Wireless cells）是物理环境中无线设备可以连接到无线接入点的区域。**

现场勘测是使用 RF 信号检测器对无线信号强度、质量和干扰进行正式评估。

通过将无线基站放置在所需位置，然后从整个区域收集信号测量值来执行现场勘测

现场勘测的目标是最大限度地提高所需区域（例如在家中或办公室内）的性能，同时最大限度地减少外部区域未经授权访问的便利性

**现场调查通常用于生成热图（heat map）。热图是建筑物蓝图上的信号强度测量值的映射。热图有助于定位热点（hot spots，信号过度饱和）和冷点（cold spots,无信号），以指导调整 WAP 位置、天线类型、天线方向和信号强度**

## 无线安全

IEEE 802.11规定了两种无线网络验证机制：

- **OSA（Open System Authentication）**：OSA 意味着不需要真正的身份验证。只要无线电信号可以在客户端和 WAP 之间传输，就允许通信
- **SKA（Shared Key Authentication）**：使用 SKA 时，必须先进行某种形式的身份验证，然后才能进行网络通信。802.11 标准为 SKA 定义了一种可选技术，称为Wireless Equivalent Privacy （WEP）。**后来的 802.11 修正案增加了 WPA、WPA2、WPA3 和其他技术**


### WEP(Wired Equivalent Privacy)

使用预定义的共享RC4密钥进行认证和加密，因为RC4的缺陷，WEP不再安全。

### WPA(Wi-Fi Protected Access)

WPA 是 WEP 的重大改进，因为它不使用相同的静态密钥来加密所有通信。相反，它与每个主机协商一个唯一的密钥集。此外，它还将身份验证与加密分开。

WPA是随着802.11i发布的。

### WPA2

IEEE 802.11i 或 Wi-Fi 保护访问 2 （WPA2） 取代了 WEP 和 WPA。它实现了 AES-CCMP 而不是 RC4。

WPA2/802.11i 定义了两个“新”身份验证选项，称为**preshared key（PSK） 或personal （PER）** 和 **IEEE 802.1X 或enterprise （ENT）**。PSK 是使用静态固定密码进行身份验证。ENT支持利用现有AAA服务（如RADIUS或TACACS+）进行身份验证

**注意： RADIUS UDP 端口1812 TACACS＋的 TCP端口49**

### WPA3

使用AES算法，采用数器模式密码块链消息完整码协议（CCMP），但将ENT密钥长度增加到192位（PER仍使用128位）。将PSK身份验证替换为Simultaneous Authentication of Equals（SAE），仍然使用密码，但不再加密发送密码，而是采用蜻蜓密钥交换（Dragonfly Key Exchange）技术，是Diffie–Hellman的衍生物。WPA3实现了管理帧保护，加强管理操作的安全性。

### 802.1x/EAP

WPA、WPA2 和 WPA3 支持称为 802.1X/EAP 的企业 （ENT） 身份验证，这是一种基于端口的标准网络访问控制，可确保客户端在进行正确身份验证之前无法与资源通信。

**通过使用 802.1X，可以将其他技术和解决方案，例如RADIUS、TACACS+、证书、智能卡、令牌设备和生物识别技术集成到无线网络中，从而提供相互身份验证和多因素身份验证技术。**

 Extensible Authentication Protocol（EAP） 不是一种特定的身份验证机制;相反，它是一个身份验证框架。实际上，EAP 允许新的身份验证技术与现有的无线或点对点连接技术兼容。

### LEAP

轻量级可扩展身份验证协议 （LEAP） 是 WPA TKIP 的思科专有替代方案。这是为了解决 802.11i/WPA2 系统被批准为标准之前 TKIP 中的缺陷而开发的。

不再推荐使用，如果已经使用，建议使用强密码。

### PEAP

**受保护的可扩展身份验证协议 （PEAP） 将 EAP 方法封装在 TLS 隧道中，该隧道提供身份验证和加密。** 由于EAP最初设计用于物理隔离的信道，因此假定为安全路径，因此EAP通常不加密。PEAP 可以为 EAP 方法提供加密。

## 无线保护（WPS）

Wi-Fi保护设置（Wi-Fi Protected Setup，WPS）：无线网络的安全标准，它旨在减少将新客户端添加到无线网络的工作量，也就是Wi-Fi安全配置的引导程序。由于可以配置PIN码来远程启动引导程序，因此容易遭受爆破攻击，建议禁用WPS。

## 无线MAC过滤

MAC 过滤器可用于 WAP 上，以限制或限制仅对已知和已批准设备的访问。其实就是通过MAC地址做访问控制。

## 无线天线（Wireless Antenna）管理

天线的类型：

- 全向天线（omnidirectional antenna）：
- 定向天线（directional antennas）：

天线应该放置在：

- 放在中心位置
- 避免坚固的物理障碍物
- 避免反光或其他平坦的金属表面
- 避免使用电气设备

## 强制网络门户

强制网络门户（captive portal）：**强制门户是一种身份验证技术，可将新连接的客户端重定向到基于 Web 的门户访问控制页面**，国内酒店的WIFI就是这样。

## 通用WIFI安全操作

- 更新固件。
- 将默认管理员密码更改为唯一且复杂的密码。
- 启用WPA2或者WPA3加密。
- 启用ENT身份验证或者启用长且复杂密码的PSK/SAE。
- 更改SSID
- 更改无线MAC地址
- 根据部署要求决定是否禁用SSID广播
- 如果无线客户端池相对较小且是静态的，则启用MAC过滤
- 考虑使用静态IP地址，或者配置带有保留的DHCP（仅适用小网络）。
- 将无线视为外部或远程访问，并使用防火墙将WAP与有线网络分开。
- 将无线视为攻击者的入口点，并使用NIDS监控所有WAP到有线网络的通信。
- 部署无线入侵检测系统（WIDS）和无线入侵预防系统（WIPS）。
- 考虑需要在Wi-Fi链路上使用VPN。
- 实现一个强制门户
- 跟踪/记录所有无线活动和事件。

## 无线通信

### 通用的无线概念

无线通信使用无线电波远距离传输信号。

无线电频谱使用频率进行区分。频率是特定时间内波振荡次数的量度，使用赫兹 （Hz） 单位确定。

无线电波的频率在 3 Hz 到 300 GHz 之间。为了管理有限无线电频率的同时使用，开发了几种频谱使用技术，包括扩频（spread spectrum）、FHSS、DSSS 和 OFDM。

**扩频**意味着通信发生在多个频率上。因此，一条消息被分成几部分，并且每条消息都在同一时间发送，但使用不同的频率。实际上，这是一种并行通信，而不是串行通信

**跳频扩频** （Frequency Hopping Spread Spectrum，FHSS） 是扩频概念的早期实施。FHSS 在一定频率范围内串联传输数据，但一次只使用一个频率。

**直接序列扩频** （Direct Sequence Spread Spectrum，DSSS） 采用同时并行的频率。DSSS 使用一种称为 chipping code 的特殊编码机制，即使部分信号因干扰而失真，接收器也可以重建数据。

**正交频分复用** （Orthogonal Frequency-Division Multiplexing，OFDM） 采用数字多载波调制方案，可实现更紧密紧凑的传输。调制信号是垂直的（正交），因此不会造成彼此的干扰。最终，OFDM 需要更小的频率集（又称信道频带），但可以提供更大的数据吞吐量。

### 蓝牙（802.15）

Bluetooth is defined in **IEEE 802.15** and uses the 2.4 GHz frequency。蓝牙默认是通过明文传输的，但是也能加密。

和蓝牙相关的攻击：

- **Bluesniffing** 是以蓝牙为中心的网络数据包捕获。
- **Bluesmacking** 是一种针对蓝牙设备的 DoS 攻击，可以通过传输垃圾流量或信号干扰来实现。
- **Bluejacking** 涉及在未经所有者/用户许可的情况下向支持蓝牙的设备发送未经请求的消息。这些消息可能会自动显示在设备的屏幕上，但许多现代设备会提示是显示还是丢弃此类消息
- **Bluesnarfing** 是通过蓝牙连接未经授权访问数据。有时，术语 bluejacking 被错误地用于描述或标记 bluesnarfing 的活动。Bluesnarfing 通常发生在黑客系统和目标设备之间的配对链接上。但是，如果无法发现设备的蓝牙 MAC 地址已知，也可以使用 bluesniffing 收集这些地址，也可以针对这些设备进行 bluesnarfing。
- **Bluebugging** 允许攻击者通过蓝牙连接远程控制您设备的硬件和软件。该名称来源于在受感染的系统上启用麦克风以将其用作远程无线错误


所有蓝牙设备都容易受到 bluesniff、bluesmacking 和 bluejacking 的攻击。只有少数设备被发现容易受到 bluesnarfing 或 bluebugging 的攻击。

### RFID

射频识别 （Radio Frequency Identification，RFID） 是一种跟踪技术，其基础是当天线放置在磁场中时，利用天线中产生的电流（图 11.7）为无线电发射器供电

有人担心 RFID 可能是一种侵犯隐私的技术。如果您正在使用带有 RFID 芯片的设备，那么任何拥有 RFID 阅读器的人都可以记录来自您芯片的信号。当 RFID 芯片被唤醒或响应靠近阅读器时，芯片（也称为 RFID 标签）会传输唯一的代码或序列号。如果没有相应的数据库将数字与特定对象（或人）相关联，该唯一数字就毫无意义。但是，如果周围只有您一个人并且有人检测到您的 RFID 芯片代码，那么他们可以将您和/或您的设备与该代码相关联，以便将来检测到相同的代码。

系统主要由读写器（Reader)、电子标签（Tag)和数据管理系统3个部分组成。

![](attachments/Pasted%20image%2020241213114212.png)


**无源RFID**：公交卡、身份证、食堂餐卡  （TAG无需电源）
**有源RFID**：ETC    （TAG需要供电）
**半有源RFID**：在通常情况下，半有源RFID标签处于休眠状态，仅对标签中保持数据的部分进行供电，因此耗电量较小，可维持较长的时间。当标签进入RFID阅读器的识别范围后，阅读器先以125kHz的低频信号在小范围内精确激活标签使之进入工作状态，再通过2.4GHz的微波与其进行信息传递。也就是说，在不同位置安置多个低频阅读器用于激活半有源RFID 产品，由此，既能实现定位，又能实现数据的采集与传输。

### NFC

近场通信 （Near-field communication，NFC） 是一种标准，用于在设备附近建立无线电通信（例如无源 RFID 的几英寸与英尺）。

NFC 常见于智能手机和许多移动设备配件上。它通常用于执行设备到设备的数据交换、设置直接通信或通过 NFC 与 WAP 链接来访问更复杂的服务，例如 WPA2/WPA3 无线网络

**NFC技术基于无线电波传播的原理，通过无源标签与读写器进行数据交换，实现短距离的安全通信。其通信模式主要分为主动模式和被动模式。在主动模式下，能够实现设备之间的双向数据传输，如文件传输和点对点通信；在被动模式下，数据则只会在一个方向上流动，如在门禁卡和公交卡的应用场景中，设备主动读取卡片信息。**

## 无线攻击

### WI-FI扫描器

### 恶意接入点（Rogue Access Points）

流氓 WAP 可能由员工为方便而植入，由物理入侵者在内部安装，或由攻击者在外部操作。此类未经授权的访问点通常没有进行安全配置，或者如果有，则它们没有正确配置或与组织批准的访问点一致。应识别并删除流氓 WAP，以消除进入您原本安全网络的不受管制的访问路径。

### 邪恶双胞胎（Evil Twin）

### 解除关联（Disassociation）

Disassociation 是众多类型的无线管理帧之一。取消关联帧用于断开客户端与一个 WAP 的连接，因为它正在连接到同一 ESSID 网络覆盖区域中的另一个 WAP。如果恶意使用，客户端将丢失其无线链接。抵御这些攻击的主要防御措施是运行 WIDS，用于监控无线滥用。
### 干扰（Jamming）

干扰是指传输无线电信号，通过降低有效信噪比来故意阻止或干扰通信。为避免或尽量减少干扰和干扰，请先调整设备的物理位置。接下来，检查使用相同频率和/或通道的设备（即信号配置）。如果存在冲突，请更改您控制的设备上使用的频率或频道。**如果发生干扰攻击，请尝试对攻击源进行三角测量并采取适当的措施来解决问题**，即，如果问题源在您的实际位置之外，请联系执法部门。

### IV滥用（IV abuse）

初始化向量 （IV） 是随机数的数学和加密术语。大多数现代加密函数使用 IV 通过降低可预测性和可重复性来提高其安全性。当 IV 太短、以明文交换或选择不当时，它就会成为一个弱点。IV 攻击的一个例子是使用 aircrack-ng.org Aircrack-ng 套件中的 wesside-ng 工具破解 WEP 加密。

### 重放（replay）

重放攻击是指重新传输捕获的通信，以期获得对目标系统的访问权限。重放攻击试图通过重放（即重新传输）针对系统的捕获流量来重新建立通信会话。这可能会授予 adversary 对帐户的访问权限，而攻击者没有帐户的实际凭据。

重放攻击概念还用于对付没有临时保护的加密算法。在这种攻击中，恶意个人拦截了双方之间的加密消息（通常是身份验证请求），然后 “重放” 捕获的消息以打开新会话。

**通过保持基站固件更新，可以缓解无线重放攻击。WIDS 将能够检测到此类滥用行为并及时将情况通知管理员。其他防御措施包括使用一次性身份验证机制、每条消息中的时间戳和到期时间、使用基于质询-响应的身份验证以及使用顺序会话识别。**
# 其它通信协议

**LiFi（light fidelity，光保真度）：** 是一种利用光进行无线通信的技术。传输速率很高，理论可以达到100Gbps。LiFi目前还被认为是一种不可靠的传输方式，并且比WIFI贵。

**卫星通信（Satellite communications）：** 主要基于在地面位置和轨道人造卫星之间传输无线电波。通常来说，延迟较高。

**窄带无线（Narrow-band wireless）：** 被 SCADA 系统广泛用于在**电缆或传统无线无效或不合适**的远程或地理空间内进行通信。

**Zigbee：** 是一种基于蓝牙的物联网设备通信概念。**Zigbee 功耗低，吞吐率低**，并且需要设备非常接近。**Zigbee 通信使用 128 位对称算法进行加密**

**基带无线电（baseband radio）：** 是利用无线电波作为单一通信的载体。Wi-Fi 和蓝牙是基带无线电的示例。应识别、监控和加密基带无线电的所有用途。
# 蜂窝网络（cellular network）

1. **加密问题**：**移动设备到基站的通信是加密的，但是信息在线路中的传输是不加密的，所以在使用蜂窝网络时，建议先使用加密通信，例如TLS和VPN。**
2. **中间人攻击**：使用特定的无线嗅探设备，可以拦截您的手机传输。
3. **暴露面/脆弱面增大**：使用您的手机连接访问互联网或办公室网络为攻击者提供了另一种潜在的攻击、访问和妥协途径。其**中许多设备可能充当桥梁，从而创建对公司网络的不安全访问。**

4G网络允许移动设备传输速率达到100Mbps，固定设备可以达到1Gbps。而5G网络传输速度可以达到10Gbps，但是传输距离更短。
# 内容分发网络（CDN）

虽然大多数的CDN都关注服务器的物理分布，但是基于客户端的CDN也是可能的，这通常被称为P2P CDN。最广为人知的P2P CDN是BitTorrent。

# 确保网络安全的组件

私有网段有两种基本类型：Intranets 和 Extranets。

**Intranet** 为用户提供了对内部服务器上的 Web、电子邮件和其他服务的访问权限，专用网络之外的任何人都无法访问这些服务。


**Extranet** 是 Internet 和 Intranet 之间的交叉。Extranet 是组织网络的一部分，已被划分为专用网络的 Intranet，但也向外部人员或外部实体提供信息。**供公共使用的 Extranet 通常标记为屏蔽子网（screened subnet）或外围网络（perimeter network）。**

**屏蔽子网**（screened subnet，以前称为非军事区 [DMZ]）**是一种特殊用途的 Extranet，专为低信任和未知用户访问特定系统而设计，例如访问 Web 服务器的用户**。屏蔽子网通常有两个防火墙，一个介于屏蔽子网和互联网之间，一个介于屏蔽子网和intranet之间。

**屏蔽主机**（screened host）是放置在某个网络分段中受到防火墙保护的主机。所有入向流量都会经过它，并由它作为代理请求私有网络中的可信系统。它负责过滤进入私有网络的流量，也负责保护内部系统的身份。

**东西向流量**：东西向流量是指在特定网络、数据中心或云环境中发生的流量
**南北向流量**：南北向流量是指内部系统和外部系统之间发生的入站或出站流量


## 硬件的安全运维

略

## 常见网络设备

以下是网络中的一些典型硬件设备：

- **中继器（Repeaters）、集中器（Concentrators）和放大器（Amplifiers）**：中继器、集中器和放大器 （RCAs） 用于增强电缆段上的通信信号，以及连接使用相同协议的网段。RCA 在 OSI 第 1 层运行。RCA 两侧的系统都属于同一碰撞域和广义投射域
- **集线器（Hubs）**：集线器用于连接多个系统并连接使用相同协议的网段。集线器是多端口中继器。集线器在 OSI 第 1 层运行。集线器两侧的系统都属于同一冲突域和广播域
- **调制解调器（Modems）**：传统的固定电话调制解调器（调制器-解调器）是一种通信设备，它覆盖或调制模拟载波信号和数字信息，以支持 PSTN 线路的计算机通信。术语 modem 在任何实际不执行调制的设备上都被错误地使用。大多数标记为调制解调器（电缆、DSL、无线等）的现代设备都是路由器，而不是调制解调器。
- **网桥（Bridges）**：网桥用于将两个网络连接在一起，甚至是具有不同拓扑、布线类型和速度的网络，以便连接使用相同协议的网段。网桥将流量从一个网络转发到另一个网络。使用不同传输速度连接网络的网桥可能有一个缓冲区来存储数据包，直到它们可以转发到速度较慢的网络。**这称为存储转发设备**。网桥在 OSI 第 2 层运行。网桥主要用于将集线器网络连接在一起，因此大部分已被交换机取代。
- **交换机（switches）**：交换机通过 MAC 地址管理帧的传输。交换机在用于创建 VLAN 时也可以创建单独的广播域（请参阅第 12 章）。交换机主要在 OSI 第 2 层运行。当交换机具有其他功能（如 VLAN 之间的路由）时，它们也可以在 OSI 第 3 层运行。
- **路由器（routers）**：路由器用于控制网络上的流量，通常用于连接类似的网络并控制两者之间的流量。路由器根据逻辑 IP 寻址管理流量。它们可以使用静态定义的路由表运行，也可以采用动态路由系统。路由器在 OSI 第 3 层运行。
- **LAN 扩展器（LAN Extenders）**：LAN 扩展器是一种远程访问多层交换机，用于通过 WAN 链路连接远程网络。又名 WAN 交换机或 WAN 路由器。
- **跳转箱（jumpbox）**：Jump Server 或 Jumpbox 是一种远程访问系统，用于使访问特定系统或网络更轻松或更安全。跳板服务器通常部署在 Extranet、屏蔽子网或云网络中，在这些网络中，标准直接链接或专用通道不可用或被认为不安全。可以部署跳转服务器来接收带内 VPN 连接，但大多数跳转服务器都配置为接受带外连接，例如直接拨号或 Internet 源宽带链接。无论使用哪种形式的连接来访问跳板服务器，都必须确保仅使用加密连接。
- **传感器（sensor）**：传感器收集信息，然后将其传输回中央系统进行存储和分析。传感器是雾计算、ICS、IoT、IDS/IPS 和 SIEM/安全编排、自动化和响应 （SOAR） 解决方案的常见元素。许多传感器都基于 SoC。
- **收集器（collector）**：安全收集器是将数据收集到日志或记录文件中的任何系统。收集器的功能类似于 auditing、logging 和 moni toring 的功能。收集器监视特定活动、事件或流量，然后将信息记录到记录文件中。
- **聚合器（Aggregators）**：聚合器是一种多路复用器。接收大量输入并将其定向或传输到单个目标。
- **SoC（system on a chip）**：片上系统 （SoC） 是一种集成电路 （IC） 或芯片，它将计算机的所有元素集成到单个芯片中。这通常包括主 CPU、RAM、GPU、Wi-Fi、有线网络、外围接口（如 USB）和电源管理。在大多数情况下，与完整的计算机相比，**SoC 唯一缺少的项目是大容量存储**

## 网络访问控制

网络访问控制(Network Access Control, NAC)指通过严格遵守和实施安全策略来控制对环境的访问。 NAC 的目标如下: 
- **防止/减少零日攻击** 
- **在整个网络中实施安全策略**
- **使用标识执行访问控制**

NAC 可通过接入前控制（preadmission）或接入后控制（postadmission）(或两者)来实现:

- The preadmission philosophy requires a system to meet all current security requirements (such as patch application and malware scanner updates) before it is allowed to communicate with the network.
- The postadmission philosophy allows and denies access based on user activity, which is based on a predefined authorization matrix.

NAC在实施时有两种方案：

- 基于agent的（agent-based）：在机器上安装agent，如果机器符合基线要求，则可以访问网络，否则则将机器隔离起来
- 无agent的（agentless）：通过监控网络，网络扫描等方式判断某个机器是否存在漏洞，如果存在漏洞或者网络流量异常，则隔离。

## 防火墙

常见的入口过滤器(ingress filters)和出口过滤器(egress filters)可用于阻止通常与恶意软件、僵尸网络和其他不需要的活动相关的欺骗性数据包。示例包括：

- 阻止声称具有内部源地址的入站数据包
- Blocking outbound packets claiming to have an external source address
- Blocking packets with source or destination addresses listed on a block list (a list of known malicious IP addresses)
- Blocking packets that have source or destination addresses from the local area network (LAN) but haven’t been officially assigned to a host

防火墙通常无法直接阻止通过其他授权通信渠道传输的病毒或恶意代码，防止用户未经授权但意外或有意地泄露信息，防止防火墙后面的恶意用户的攻击，或在数据传出或传入专用网络后保护数据，但是可以通过各种防火墙插件实现这一点。这种类型的防火墙也叫做multifunction device (MFD), a unified threat management (UTM) device, or a next-generation firewall (NGFW).

除了记录网络流量活动外，防火墙还应记录其他几个事件： 
- 防火墙重新启动 
- 代理或依赖项无法启动或未启动 
- 代理或其他重要服务崩溃或重新启动 
- 防火墙配置文件的更改
- 防火墙运行时出现配置或系统错误

有几种基本类型的防火墙，可以混合创建混合或复杂的防火墙解决方案：

**静态数据包过滤防火墙（Static Packet-Filtering Firewalls）：** 静态数据包过滤防火墙（又名屏蔽路由器）通过检查来自消息标头的数据来干扰流量。通常，规则与源和目标 IP 地址（第 3 层）和端口号（第 4 层）有关。这也是一种无状态防火墙，因为每个数据包都是单独评估的，而不是以 context 评估的（由有状态防火墙执行）。

**应用程序级防火墙（Application-Level Firewalls）**：应用程序级防火墙在 OSI 模型的应用程序层（第 7 层）运行。Web 应用程序防火墙 （WAF） 就是一个示例。此防火墙可以是无状态或有状态的。 
**电路级防火墙（Circuit-Level Firewalls）**：电路级防火墙（又名电路代理）用于在受信任的合作伙伴之间建立通信会话。SOCKS（来自 Socket Secure，如 TCP/IP 端口）是电路级防火墙的常见实现。电路级防火墙侧重于电路（或会话）的建立，而不是流量内容，基于 IP 和端口的简单规则，使用强制门户，要求通过 802.1X 进行端口身份验证，或更复杂的元素，例如基于上下文或属性的访问控制。这也是一种无状态防火墙。
**状态检查防火墙（Stateful Inspection Firewalls）**：**状态检查防火墙（又名动态数据包过滤防火墙）评估网络流量的状态、会话或上下文**。通过检查源地址和目标地址、应用程序使用情况、源源（即本地或远程、物理端口，甚至路由路径/向量）以及当前数据包与同一会话的先前数据包之间的关系，状态检查防火墙能够为授权用户和活动授予更广泛的访问权限，并主动监视和阻止未经授权的用户和活动。状态检查防火墙在 OSI 第 3 层及以上运行
**下一代防火墙 （Next-Generation Firewalls，NGFW）**：下一代防火墙 （NGFW） 是一种多功能设备 （MFD） 或统一威胁管理 （UTM），由除防火墙外的多种安全功能组成;集成组件可以包括应用程序过滤、深度数据包检查、TLS 卸载和/或检查（又名 TLS 终端缩小代理）、域名和 URL 过滤、IDS、IPS、Web 内容过滤、QoS 管理、带宽限制/管理、NAT、VPN 锚定、身份验证服务、身份管理和防病毒/防恶意软件扫描
**内部分段防火墙 （Internal Segmentation Firewall，ISFW）**：内部分段防火墙 （ISFW） 是部署在内部网段或公司部门之间的防火墙。其目的是防止专用网络中已有的恶意代码或有害协议的进一步传播。使用 ISFW，可以在不求助于气隙(air gaps)、VLAN 或子网划分的情况下创建网段。ISFW 通常用于微分段架构。
### 代理

代理位于客户端和服务端之间，用于转发他俩之间的通信流量。

**正向代理**：是一种标准或通用代理，充当查询外部资源的中介。正向代理在访问外部服务时处理来自内部客户端的查询。

**反向代理**：提供与正向代理相反的功能;它处理从外部系统到内部服务的入站请求。反向代理类似于端口转发和静态 NAT 的功能。有时在屏蔽子网的边界上使用反向代理，以便在资源服务器上使用私有 IP 地址，但允许来自公共 Internet 的访问者。

**透明代理（transparent proxy）**：如果客户端未配置为直接向代理发送查询，但网络仍将出站流量路由到代理，则正在使用透明代理

**不透明代理（nontransparent proxy）**：当客户端被配置为将 Client 端（图 11.8，右）直接发送到 proxy 时，正在使用非透明代理。可以手动设置非透明代理的设置，也可以使用代理自动配置 （proxy auto-config，PAC） 文件进行设置。PAC 可以通过脚本或通过 DHCP 实现。

### 内容/URL过滤器

**URL 过滤**：也称为 Web 过滤，是根据用于请求访问的全部或部分 URL 阻止对网站的访问

**Web 安全网关**：是一种 Web 内容过滤器（通常基于 URL 和内容关键字）的设备，也支持恶意软件扫描。一些 Web 安全网关还会包含一些非 Web 功能，包括即时消息 （IM） 过滤、电子邮件过滤、垃圾邮件拦截和欺骗检测。因此，有些被认为是 UTM 或 NGFW。

## 终端安全

**EDR**：Endpoint detection and response，端点检测和响应 （EDR） 是一种安全机制，是传统反恶意软件产品、IDS 和防火墙解决方案的演变。EDR 旨在检测、记录、评估和响应可疑活动和事件，这些活动和事件可能由有问题的软件或有效和无效的用户引起
**MDR**：managed detection and response，MDR 侧重于威胁检测和调解，但不限于端点的范围。**MDR 是一种服务，它试图实时监控 IT 环境以快速检测和解决威胁。MDR 解决方案通常是多种技术的组合和集成，包括 SIEM、网络流量分析 （NTA）、EDR 和 IDS。**
**EPP**：endpoint protection platform，EPP 是 EDR 的一种变体，就像 IPS 是 IDS 的一种变体一样。EPP 的重点是四个主要安全功能：预测、预防、检测和响应。因此，EPP 是更被动的 EDR 概念的更主动的预防和预测变化。
**XDR**：**XDR 与其说是另一种工具，不如说是将多个概念收集并集成到一个解决方案中。XDR 组件可能因供应商而异，但它们通常包括 EDR、MDR 和 EPP 元素。** 此外，XDR 不仅关注终端节点，通常还包括 NTA、NIDS 和 NIPS 功能。
**MSSP**：managed security service provider，从那里，我们不妨提到托管安全服务提供商 （MSSP） 可以提供集中控制和管理的 XDR 解决方案。MSSP 解决方案可以完全在本地部署、完全在云中部署，也可以作为混合结构部署。MSSP 解决方案可以通过 SOC 进行监督，而 SOC 本身是本地或远程的。

## 布线、拓扑和传输介质技术

### 传输媒介

#### 同轴电缆（Coaxial Cable）

一条普通（RG-59）的同轴电缆  
A：电线外皮  
B：网状导电层  
C：塑胶绝缘体  
D：中心的铜线

![](attachments/Pasted%20image%2020241217115031.png)

支持双向通信，强抗电磁干扰能力，支持高带宽（与同期其它技术相比），比双绞线更长的有效传输距离。

有两种主要类型的同轴电缆：细网和粗网。

细网（10Base2）：可跨越185米，最高吞吐量10Mbps

粗网（10Base5）：可跨越500米，最高吞吐量10Mbps
#### 基带和宽带电缆（Baseband and Broadband Cables）

用于标记大多数网络电缆技术的命名约定遵循语法 :XXyyyyZZo XX 表示电缆类型提供 的最大速度，例如， 10Base2 电缆为 10Mbps。下一系列字母yyyy代表电缆的基带或宽带方 面，例如 10Base2 电缆的基带。基带电缆一次只能传输一个信号，宽带电缆可以同时传输多个信号。


#### 双绞线（twisted pair）

与同轴电缆相比，双绞线布线非常轻便灵活。它由四对彼此缠绕在一起的电线组成，然后 套在PVC绝缘体中

![](attachments/Pasted%20image%2020241217115441.png)

屏蔽双绞线（STP）：
非屏蔽双绞线（UTP）：

**双绞线的传输距离建议不超过100米。**

使用双绞线常见的问题：

- 使用错误类型的twisted-pair进行高吞吐量数据传输
- 部署双绞线超过它的最大传输距离（100m）
- 在强干扰环境中使用UTP(unshielded twisted-pair)
#### 导线（Conductors）

基于导体的网络布线的距离限制源于用作导体的金属的电阻。铜是最受欢迎的导体，是最好和最便宜的室温导体之一。但是，它仍然对电子的流动有抵抗力。这种电阻会导致信号强度和质量在电缆长度上下降。

**信号的这种衰减称为衰减（attenuation）。**
#### 光纤电缆

**基于导体的网络布线的替代方案是光纤电缆。光纤电缆传输光脉冲而不是电脉冲。**

光纤传输的距离更远，单模光纤可以在不使用中继器的情况下传输1万米。


## 网络拓扑

### 环形拓扑

**Only one system can transmit data at a time**. Traffic management is performed by a token. A token is a digital hall pass that travels around the ring until a system grabs it. A system in possession of the token can transmit data. Data and the token are transmitted to a specific destination. As the data travels around the loop, each system checks to see whether it is the intended recipient of the data. If not, it passes the token on. If so, it reads the data. Once the data is received, the token is released and returns to traveling around the loop until another system grabs it.

![](attachments/Pasted%20image%2020241217142558.png)

### 总线拓扑（bus topology）

总线拓扑将每个系统连接到主干电缆或主干电缆。总线上的所有系统都可以同时传输数据，这可能会导致冲突.

为了避免通信冲突，系统采用了一种冲突避免机制，该机制基本上 “侦听” 了当前发生的任何其他流量。如果听到流量，系统会等待片刻，然后再次侦听。如果未听到流量，则系统传输其数据。

总线拓扑还分为两种部署方式：

- 线形（Linear）
- 树形（Tree）

![](attachments/Pasted%20image%2020241217143621.png)

### 星形拓扑（star topology）

星形拓扑采用集中式连接设备。此设备可以是简单的集线器或交换机。每个系统都通过专用段连接到中央集线器（见图 11.11）。如果任何一个 Segment 失败，其他 Segment 可以继续运行。**但是，中央枢纽是单点故障**。通常，星形拓扑比其他拓扑使用更少的布线，并且更容易识别故障的电缆。

逻辑总线可以实现为物理星形。**以太网是一种基于总线的技术**。它可以部署为物理星形，但集线器或交换机设备实际上是内部的逻辑总线连接设备

![](attachments/Pasted%20image%2020241217145731.png)

### 网状拓扑（mesh topology）


网状拓扑使用大量路径将系统连接到其他系统（参见图 11.12）。全网状拓扑将每个系统连接到网络上的所有其他系统。部分网格拓扑将许多系统连接到许多其他系统。**Mesh 拓扑提供与系统的冗余连接，允许多个 Segment 发生故障，而不会严重影响连接。**

![](attachments/Pasted%20image%2020241217145957.png)

## 以太网



以太网可以支持全双工通信，并且通常采用双绞线布线。（最初使用同轴电缆）。以太网最常部署在**星形或总线拓扑**上。**以太网基于 IEEE 802.3 标准**。以太网数据的各个单元称为**帧**。快速以太网支持 100 Mbps 吞吐量。

## 子技术（Sub-Technologies）

### 模拟和数字

**模拟通信**：模拟通信发生在频率、振幅、相位、电压等方面变化的连续信号。连续信号的变化会产生波形（与数字信号的方形相反）。实际的通信是由常数信号的变化发生的。

**数字通信**：数字通信通过使用不连续的电信号和状态变化或开关脉冲来实现。

数字信号在长距离或存在干扰时比模拟信号更可靠。
### 同步和异步

同步通信依赖于基于独立 clock 或 time stamp 的 timing 或 clocking 机制嵌入在数据流中。同步通信通常能够支持非常高的数据传输速率。

异步通信依靠 stop 和 start 分隔符位来管理数据传输。由于使用分隔符位及其传输的停止和启动性质，异步通信最适合于少量数据。PSTN 调制解调器是异步通信设备的好例子。

### 基带和宽带

**基带技术**只能支持单个通信通道。它使用施加到电缆的直流电。处于较高电平的电流表示二进制信号 1，处于较低电平的电流表示二进制信号 0。基带是数字信号的一种形式。以太网是一种基带技术


**Broadband** technology can support multiple simultaneous signals. Broadband uses fre quency modulation to support numerous channels, each supporting a distinct communi cation session. Broadband is suitable for high throughput rates, especially when several channels are multiplexed. Broadband is a form of analog signal. Cable television and cable modems, DSL, T1, and T3 are examples of broadband technologies.
### 广播、多播和单播

- **广播技术**支持与所有可能的接收者进行通信。
- **多播技术**支持与多个特定收件人的通信。
- **单播技术**支持与特定收件人的单一通信

### LAN媒介访问

至少有五种局域网接入媒介技术用于避免或防止传输冲突。这些技术定义了同一碰撞域内的多个系统如何进行通信。其中一些技术可以主动防止碰撞，而另一些则对碰撞做出反应。

LAN防通信碰撞的几种技术：

- **CSMA（Carrier-Sense Multiple Access）**：
	- The host listens to the LAN media to determine whether it is in use
	- If the LAN media is not being used, the host transmits its communication
	- The host waits for an acknowledgment
	- If no acknowledgment is received after a time-out period, the host starts over at step 1
- **CSMA/CD（Carrier-Sense Multiple Access with Collision Detection）**：
	- The host listens to the LAN media to determine whether it is in use
	- If the LAN media is not being used, the host transmits its communication.
	- While transmitting, the host listens for collisions (in other words, two or more hosts transmitting simultaneously)
	- If a collision is detected, the host transmits a jam signal.
	- If a jam signal is received, all hosts stop transmitting. Each host waits a random period of time and then starts over at step 1.

以太网网络采用 CSMA/CD 技术。CSMA/CD 通过让冲突域的每个成员等待一小段但随机的时间，然后再重新开始该过程来响应冲突


- **CSMA/CA（Carrier-Sense Multiple Access with Collision Avoidance）**：
	- The host has two connections to the LAN media: inbound and outbound. The host listens on the inbound connection to determine whether the LAN media is in use.
	- If the LAN media is not being used, the host requests permission to transmit.
	- If permission is not granted after a time-out period, the host starts over at step 1.
	- If permission is granted, the host transmits its communication over the outbound connection
	- The host waits for an acknowledgment.
	- If no acknowledgment is received after a time-out period, the host starts over at step 1.

802.11 无线网络是采用 CSMA/CA 技术的网络的一个示例。

- **数字令牌**：执行通信的 LAN 媒体访问技术。拥有令牌允许主机传输数据。传输完成后，它会将令牌释放到下一个系统。令牌传递由基于环拓扑的网络使用，例如传统的令牌环和光纤分布式数据接口 （FDDI）。令牌传递可以防止冲突，因为只有拥有令牌的系统才能传输数据。
- **轮询**：这是使用主从配置执行通信的 LAN 介质访问技术。**一个系统被标记为主系统。所 有其他系统都标记为次要系统**。主系统轮询或查询每个二级系统是否需要传输数据。如果辅助 系统指示需要，则授予其传输许可。传输完成后，主系统继续轮询下一个辅助系统。同步数据 链路控制(SDLC)使用轮询。



--------

a
d
abd
abde  abe
b

a  c
bce
a
abd
b

b d
d
c d
b
c b

b
bde  bef
a
a
acd






