# 重点

- 理解 PPP
- 定义 PAP, CHAP, EAP
- 能够提供 EAP 的案例
- 理解 IEEE 802.1X
- 知道端口安全
- 理解语音通信安全
- 了解与 PBX 系统相关的威胁以及 PBX 欺诈的对策
- 理解关于 VoIP 的安全问题
- 认识什么是 phreaking
- 了解远程访问安全管理相关事务
- 了解多媒体协作
- 知道负载均衡的目的
- 理解active/active
- 理解active/passive
- 理解邮箱安全工作
- 知道如何保护数据通信
- 理解虚拟网络
- 定义隧道
- 理解 VPN
- 理解split和full tunnel
- 能够解释NAT
- 知道第三方连接性
- 知道包交换和电路交换的区别
- 理解通信安全中的各种攻击和防御对策


# 协议安全机制

## 身份认证协议

**点对点协议 （PPP）**： 是一种封装协议，旨在支持通过拨号或点对点链路传输 IP 流量。PPP 是一种数据链路层协议，允许支持串行链路的 WAN 设备的多供应商互操作性。

PPP取代了串行线路网络间协议 （Serial Line Inter net Protocol，SLIP）。SLIP 不提供身份验证，仅支持半双工通信，没有错误检测功能，并且需要手动建立和拆除链接

**PPP 支持自动连接配置、错误检测、全双工通信和身份验证选项**。用于身份验证的原始 PPP 选项是 PAP、CHAP 和 EAP。

- **PAP（Password Authentication Protocol）**：PAP 以明文形式传输用户名和密码。它不提供任何形式的加密;它只提供了一种将登录凭据从客户端传输到身份验证服务器的方法。
- **Challenge Handshake Authentication Protocol (CHAP)**：CHAP 使用无法重播的质询-响应对话执行身份验证。质询是服务器发出的随机数，客户端将其与密码哈希一起用于计算单向函数派生的响应。However, since CHAP is based on MD5, it is no longer considered secure. A Microsoft customization named MS-CHAPv2 uses updated algorithms and is preferred over the original CHAP.
- **Extensible Authentication Protocol (EAP)**：This is a framework for authentication instead of an actual protocol. EAP allows customized authentication security solutions, such as supporting smartcards, tokens, and biometrics. EAP was originally designed for use over physically isolated channels and thus assumed secured pathways. Some EAP methods use encryption, but others do not. Over 40 EAP methods are defined, including LEAP, PEAP, EAP-SIM, EAP-FAST, EAP-MD5, EAP-POTP, EAP-TLS, and EAP-TTLS.

**IEEE 802.1X 定义了使用封装的 EAP 来支持 LAN 连接的各种身份验证选项**
## 端口安全

端口安全的三种含义：

1. 它可能意味着对所有连接点的物理控制，例如 RJ-45 墙壁插孔或设备端口（例如交换机、路由器或配线板上的端口），以便未经授权的用户或设备无法尝试连接到开放端口。
2. 端口安全性的另一个含义是 TCP 和 User Datagram Pro tocol （UDP） 端口的管理。If a service is active and assigned to a port, then that port is open. All the other 65,535 ports (TCP or UDP) are closed if a service isn’t actively using them. Hackers can detect the presence of active services by performing a port scan
3. 端口安全性还可以指在允许通过端口或跨端口进行通信之前需要对端口进行身份验证。这可以在交换机、路由器、智能配线架甚至无线网络上实现。

## 服务质量（Quality of Service ，QoS）

服务质量 （QoS） 是对网络通信效率和性能的监督和管理。要测量的项目包括吞吐率、比特率、数据包丢失、延迟、抖动、传输延迟和可用性。

要测量的项目包括吞吐率、比特率、数据包丢失、延迟、抖动、传输延迟和可用性。

**Bandwidth**
**Latency**
**Jitter**
**Packet Loss**
**Intererence**
**Throughput**
**Signal-to-Noise Tatio(SNR)**

# 语音通信的安全

## VoIP(Voice over Internet Protocol)

PSTN：即公共交换电话网（Public Switched Telephone Network），是一种全球性的语音通信电路交换网络。它最初由贝尔在1876年发明电话时建立，并经历了从模拟到数字的演变，目前几乎完全数字化。PSTN是一种基于电路交换的网络，通过建立专用通信通道来传输语音、数据和视频信号。

**虽然我们在11章认识到了可以通过SRTP(secure real-time protocol)对VoIP通信进行加密，但是没那么简单，如果你是和同一个ISP的其他用户通过VoIP进行通信，那么SRTP可以为你提供端到端的加密，如果你要和另一个ISP的其他用户VoIP通话，那么可能就会有兼容性问题，而且VoIP通话还可能经过PSTN网络，在PSTN网络中传输信号时，你的加密信号需要先解密。**

增加VoIP通信安全的方法：

- **使用强密码和双因素认证**
- 记录通话记录以审查异常行为
- 阻止国际呼叫
- 将 VoIP 外包给受信任的 SaaS
- **更新 VoIP 设备固件。**
- **限制对 VoIP 相关网络设备的物理访问。**
- Train users on VoIP security best practices.
- Prevent ghost or phantom calls on IP phones by blocking nonexistent or invalid- origin numbers.
- **使用 VoIP 评估功能实施 NIPS**


## 电话钓鱼和网络钓鱼（Vishing and Phreaking）

**vishing**：which stands for voice-based phishing
**Phreaking**：is a specific type of attack directed toward the telephone system and voice services in general
## PBX Fraud and Abuse（PBX欺骗与滥用）

专用交换机 （Private branch exchange，PBX） 是部署在专用组织中的电话交换或交换系统，用于实现少量外部 PSTN 线路的多站使用

许多 PBX 系统允许在不使用外线的情况下进行办公室间呼叫，为每个听筒分配分机号码，每个分机支持语音信箱以及远程呼叫。

远程呼叫，也称为旅馆式办公，是指在办公室外，呼叫办公室 PBX 系统，输入代码以访问拨号音，然后拨打另一个电话号码的能力

远程呼叫的最初目的是通过让外部人员使用免费号码呼叫办公室，然后在办公室的长途呼叫计划中拨打任何长途电话来节省资金

针对 PBX 欺诈和滥用的对策包括许多与保护典型计算机网络相同的预防措施：逻辑或技术控制、管理控制和物理控制。以下是设计 PBX 安全解决方案时要记住的几个要点：

- 考虑用信用卡或电话卡系统替换通过 PBX 进行的远程访问或长途通话。
- **将拨入和拨出功能限制为需要此类功能来完成其工作任务的授权个人**
- If you still have dial-in modems, use unpublished phone numbers that are outside the prefix block range of your voice numbers.
- **保护 PBX 的管理界面。**
- Block or disable any unassigned access codes or accounts.
- **Keep the system current with vendor/service provider updates**
- Deploy direct inward system access (DISA) technologies to reduce PBX fraud by external parties.

与任何其他安全功能一样，必须正确安装、配置和监控直接向内系统访问 （DISA），以获得所需的安全改进。**DISA 为 PBX 的所有外部连接添加了身份验证要求**。仅仅拥有 DISA 是不够的。请务必禁用组织不需要的所有功能，制作复杂且难以猜测的用户代码/密码，然后打开审计以密切关注 PBX 活动。

# 远程访问安全管理

## 远程访问和远程办公（Telecommuting）技术

四种远程访问技术：

- **Service Specific**：特定于服务的远程访问使用户能够远程连接单个服务（例如电子邮件）并对其进行操作或交互。
- **Remote Control**：远程控制远程访问使远程用户能够完全控制物理上远离他们的另一个系统。显示器和键盘就像直接连接到远程系统一样。
- **Remote Node Operation**：Remote node operation is just another name for when a remote client establishes a direct connection to a LAN, such as with wireless, VPN, or dial-up connectivity. A remote system connects to a remote access server, which provides the remote client with network services and possible internet access.
- **Screen Scraper/Scraping**：这个术语可以在两种不同的情况下使用。首先，它有时用于指代远程控制、远程访问或远程桌面服务。其次，屏幕抓取是一种允许自动化工具与人机界面交互的技术。

## 远程连接安全
## 远程访问安全计划

- **选择远程访问的技术**：拨号上网、无线网络等等
- **传输保护**：确保通信安全
- **身份验证保护**：利用PAP、CHAP等协议做好身份认证
- **远程用户助手**：需要一个人能解决远程访问过程中遇到的问题

# 管理邮件安全

互联网中邮件基础设施是邮件服务器，使用SMTP协议来接收客户的邮件并把邮件发送到目标的收件箱，除了邮件服务器还有邮件客户端，邮件客户端通过POP3或IMAP协议从邮件服务器拉取邮件。

如果部署 SMTP 服务器，则必须为入站和出站邮件正确配置强身份验证。**SMTP 被设计为邮件中继系统。这意味着它将邮件从发件人中继到预期收件人**。**但是，您希望避免将 SMTP 服务器变成开放中继（open relay）（也称为开放中继代理或中继代理）**，这是一种 SMTP 服务器，在接受和中继邮件之前不对发件人进行身份验证。开放中继是垃圾邮件发送者的主要目标，因为它们允许垃圾邮件发送者通过搭载不安全的电子邮件基础设施来发送大量电子邮件。随着开放中继被锁定（成为封闭中继或经过身份验证的中继），对手通常会通过社会工程或撞库/喷洒/猜测攻击来劫持经过身份验证的用户帐户。

可以选择邮件sass服务，例如Exchange/Outlook Online来避免一些安全问题。
## 邮件安全目标

- **限制仅对预期收件人开放访问邮件的权限（即隐私和机密性）**
- **维护消息的完整性**
- **验证消息来源**
- **提供不可否认性**
- 验证邮件的传递
- **对邮件中或附加到邮件中的敏感内容进行分类分级**

邮件安全策略：

- 电子邮件的可接受使用策略（Acceptable use policies for email）
- Access control and privacy
- Email management
- Email backup and retention policies

## 邮件安全问题

- **SMTP、POP、IMAP都是明文传输的，这导致邮件内容很容易被中间人窃取**
- 邮件头容易被伪造
- 邮件是传播木马、病毒、蠕虫的重要途经
- 邮件轰炸（Dos）
- 垃圾邮件

## 邮件安全解决方案

- 安全/多用途互联网邮件扩展（Secure Multipurpose Intemet Mail Extensions, S/MIME）
- MIME 对象安全服务(MIME Object Secu ty Services, MOSS) MOSS 能为邮件提供身份 验证、保密性、完整性及不可否认保护。
- 提供身份验证及加密服务。 隐私增强邮件(Privacy Enhanced Mail , PEM) PEM 是一种邮件加密技术，能提供身份验 证、完整性、保密性及不可否认保护。
- 域名关键字标识邮件(DomainKeys Identified Mail , DKIM) DKIM 通过验证域名标识，确 定来自组织的邮件是否有效
- 良好隐私(Pretty Good Privacy, PGP) PGP 是一种对称密钥系统，使用大量的加密算法 加密文件及邮件消息。
- SMTP 网关的 Opportunistic TLS(RFC3207) 大量组织正在使用 TLS 上的安全 SMTP ，但 是，由于对其认识的不深，该技术的应用范围并没有达到预期。该技术会在邮件服务器之间建 立起加密连接，否则就会使用明文传输。使用此项技术能够减少邮件嗅探事件的发生。
- 发件人策略框架(Sender Policy Framework, SPF) 组织可通过为 SMTP 服务器配置 SPF 来防止垃圾邮件及邮件欺骗。 SPF 通过检查发送消息的主机是否获得 SMTP 域名拥有者的授权， 来确定消息的有效性

# 多媒体协作

## 远程会议

略

## Instant Messaging and Chat

略
# 负载均衡

负载均衡技术：

![](attachments/Pasted%20image%2020241218155055.png)

负载平衡可以是软件服务或硬件设备。负载平衡还可以包含许多其他功能，具体取决于协议或应用程序，包括缓存、TLS 卸载、压缩、缓冲、错误检查、过滤，甚至防火墙和 IDS 功能

## 虚拟IP和负载持久性

## 主动-主动 vs. 主动-被动

**主动-主动系统**：是一种负载平衡形式，它在正常操作期间使用所有可用的路径或系统。如果一个或多个路径发生故障，则剩余的活动路径必须支持以前由所有路径处理的完整负载。

**主动-被动系统**：是一种负载平衡形式，可在正常操作期间使某些路径或系统处于未使用的休眠状态。如果其中一个活动元素发生故障，则被动元素将联机并接管故障元素的工作负载

# 交换和虚拟LAN

# 网络地址转换

## 拨号上网协议


## 中心化远程身份验证服务

- RADIUS
- TACACS+
- 
# 虚拟专用网

## 隧道技术

隧道技术是一种网络通信过程，通过将一种协议包封装在另一钟协议包内从而对协议数据内容进行保护。除了VPN意外，像TLS、SSL这些协议其实也是隧道技术的一种应用。

隧道技术是一种点对点的通信机制。

## VPN的工作原理

VPN通信可以建立在任何类型的网络连接上，LAN内，跨LAN，WAN等等，互联网的用户通过VPN接入LAN，可以和LAN内用户一样访问相关资源，不同的是使用VPN的用户受到VPN通信质量的影响比较大

## 常用的VPN协议


PPTP、L2F、L2TP （工作在数据链路层）

IPSec（工作在网络层）

![](attachments/Pasted%20image%2020241104160610.png)
## 虚拟局域网（VLAN)


VLAN是一种在交换机上通过硬件实现的网络分段技术。

默认条件下，交换机上的所有端口都属于 VLAN.1。但只要交换机管理员逐端口更改 VLAN 的分配，各类端口就可能分组在一起，并与其他组 VLAN 端口配置不同。 VLAN 分配或建立，可能依据设备的 MAC 地址、 子网划分的镜像(mirroring the IP subnet)。

**VLAN是通过硬件创建的，子网是通过IP地址和子网掩码实现的。**

**VLAN的安全管理：拒绝是常态，允许是例外。**


# 虚拟化

举一个虚拟化的例子：VMWare、Parallels等虚拟机管理系统

虚拟机逃逸

虚拟机的好处：

# 网络地址转换（NAT)

NAT工作在第三层，与NAT相关的还有个PAT，其实就是将内部地址映射到外部IP+端口，所以同一时间多个内部系统可以和外部交互。

动态NAT与静态NAT：静态NAT可以理解为一个内部ip地址固定映射到一个外部地址，动态NAT则可以做到很多内部IP映射到较少数量的外部ip地址上。

自动私有ip地址分配：**APIPA** (Automatic Private IP Addressing ，自动私有 分配)也称为本地链路地址分配(在 RFC 3927 中定义)，是在动态主机配置协议问1l1amic Host Configuration Proωco1 DHCP)分配失败的 情况下，**继续为系统分配 地址。分配的地址为： 169.254.0.1-169.254.2 55.254 地址段的一个 IP 地址，及 类子网掩码 255.255.0.0**

# 交换技术

- 电路交换：例如电话交换网络
- 分组交换：将数据分组，然后传输，可以并行传输
- 虚电路：虚拟线路（也称为通信路径）是在两个特定端点之间通过分组交换网络创建的逻辑路径或线路。
	- Permanent virtual circuits (PVCs)：PVC 就像一条专用专线;逻辑电路始终存在，并等待客户发送数据。PVC 是始终可用的预定义虚拟电路
	- Switched virtual circuits (SVCs)：SVC 更像是短波或业余无线电。每次要与某人通信时，您都必须将发射器和接收器调谐到新频率

# WAN技术

WAN 链路和长距离连接技术可分为两大类：专用和非专用。

# 光纤链路