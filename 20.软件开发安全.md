# 重点

- 解释关系型数据库管理系统的基本架构
- 解释专家系统、机器学习和神经网络的工作原理
- 了解系统开发的模型
- 解释敏捷软件开发的 Scrum 方法。
- 描述软件开发成熟度模型
- 了解变更和配置管理的重要性
- 了解测试的重要性。
- 解释 DevOps 和 DevSecOps 在现代企业中的作用
- 了解不同编码工具在软件开发生态系统中的作用
- 解释收购的软件对组织的影响

# 系统开发控制简介

## 软件开发

### 编程语言

### 库

### 开发工具

IDE

### 面向对象编程

一些面向对象编程关键概念：

- 消息
- 方法
- 行为
- 实例
- 继承
- 委托
- 多态性
- 内聚
- 耦合


### 保证（assurance）

为了确保新应用程序中内置的安全控制机制在系统的整个生命周期中正确实施安全策略，管理员使用保证程序。保障程序只是正式的流程，通过这些流程将信任构建到系统的生命周期中

**通用标准（CC）提供了一种用于政府环境的标准化保证方法。**
### 避免和缓解系统错误

**输入校验**：输入验证在允许进一步处理之前验证用户提供的值是否与程序员的期望相匹配
**验证和会话管理**：
**错误处理**：
**日志记录**：有助于排查问题
**Fail-Secure和Fail-Open**：
	- fail- secure 故障状态将系统置于高级别安全性（甚至可能完全禁用它），直到管理员可以诊断问题并将系统恢复到正常操作。
	- fail-open 状态允许用户绕过失败的安全控制，这偏向于宽容。


![](attachments/Pasted%20image%2020250811151945.png)

增加安全性可能会影响用户友好性，增加功能性，可能降低安全性，增加用户友好性可能降低安全性。
## 系统开发生命周期

开发一个安全系统通常需要完成的工作：

1. 概念定义
2. 功能需求确定
3. 控制规范开发
4. 设计评审
5. 编码
6. 代码评审
7. 系统测试评审
8. 维护和变更管理

### 概念定义

设计人员通常会确定系统将处理的数据的分类和适用的处理要求。在这一阶段的安全要求是比较笼统的。

### 功能需求确定

功能需求需要确认一下几个关键点：

- 输入：提供给函数的数据
- 行为：对于不同的输入，系统需要执行什么业务逻辑
- 输出：函数提供的数据

最终需要产出一个功能需求文档，这个文档在测试验收阶段可用于做checklist

### 控制规范的制定

在这个阶段，可以提出对系统的安全要求。在开发控制规范期间，您应该从多个安全角度分析系统，例如：权限控制，隐私性，可用性、审计追踪等。

### 设计评审

设计人员进行系统设计，设计人员可以准确确定系统的各个部分将如何互操作，以及模块化系统结构将如何布局。设计完成后，需要利益相关方参与设计评审。

### 编码

一旦参与方赞同该软件设计，软件开发人员就可以开始编写代码了。开发人员应使用本章中讨论的安全软件编码原则来编写符合设计并满足用户需求的代码。

### 代码审查

项目经理在项目开发的几个里程碑时刻，组织代码审查会议，这个会议通常只需要开发人员参与，一起过一遍代码，寻找其中的错误。

### 测试

**初始系统测试（initial system testing）**：研发人员自己测试并排查错误
**回归测试（regression testing）**：**新的更新添加到一个已有系统后**，需要对系统做回归测试，以确保更新正常工作。
**用户接受测试（user acceptance testing (UAT)）**：研发和测试人员测试完系统后，需要真正的用户来测试这个系统是否满足他们的需要。

测试计划及结果需要留档，以备后续查看。

测试完成后，就要进入部署环节了。

### 维护和变更管理

对代码的任何更改都要通过正式的更改管理流程进行处理，如第 1 章 “通过原则和策略进行安全治理” 中所述，这一点也很重要。

变更管理流程有三个基础组件：

**请求控制（release control）：** 谁可以发起变更。
**变更控制（change control）：** 开发人员使用变更控制过程来重建用户遭遇的特定情况并分析能进行弥补的适当变更。变更控制过程也提供了一个有组织的框架。在这个框架内，多个开发人员可创建和测试某个解决方案，然后将它部署到生产环境中。变更控制包括：遵守质量控制约束， 开发用于更新或变更部署的工具，正确记录任何编码变化，以及最小化新代码对安全性的负面影响
**发布控制（release control）：**  一旦完成变更，它们就必须通过发布控制过程进行发布。发布控制过程中一 个必不可少的步骤是：**仔细审核并确保在变更过程中作为编程辅助插入的任何代码（如调试代 码和／或后门）在软件发布前已被删除**。该流程还确保仅对生产系统进行已批准的变更。发布 控制也应包括验收测试，以确保对最终用户工作任务的变更都被理解并发挥作用。

除了变更控制过程之外，安全管理员还应意识到**软件配置管理(SCM)** 的重要性。软件配置管理过程用于控制整个组织范围内使用的软件版本，并且正式跟踪和控制对软件配置的变更。这个过程包括下列4个主要组件:

**配置标识(Configuration Identification)**: 在配置标识过程中，管理员记录整个组织范围内的软件产品的配置。 
**配置控制(Configuration Control)** :配置控制确保对软件版本的变更与变更控制和配置管理策略一致。只有符合这些策略的授权分发能执行更新操作。 
**配置状态统计(Configuration Status Accounting)**： 用于跟踪发生的所有授权变更的正规过程。 
**配置审计(Configuration Audit)** ：定期的配置审计能够确保实际的生产环境与统计记录一致，并确保没有发生未授权的配置变更。 总之，变更控制与配置管理技术一起构成了软件工程体系的重要部分，并且能够使组织避免与开发相关的安全性问题


## 生命周期模型

### 瀑布模型（waterfall model）

![](attachments/Pasted%20image%2020241211105704.png)


然而，这个模型受到的一个主要批评是：**只允许开发人员在软件开 发过程中后退一个阶段。瀑布模型并没有规定如何处理在开发周期后期发现的错误。**

### Spiral 模型（螺旋模型）

由于螺旋模型封装了另一个模型（瀑布模型）的多次迭代，因此它被称为元模型或“模型的模型”。

![](attachments/Pasted%20image%2020241211105904.png)


螺旋模型为瀑布模型受到的主要批评 提供了一个解决方案，也就是说，如果技术需求和客户需求发生变化，需要改进系统时，允 许开发人员回到计划编制阶段。瀑布模型侧重千大规模的工作，以交付已完成的系统，而螺 旋模型侧重于迭代一系列越来越“完善”的原型，以强化质量控制。

### 敏捷软件开发（Agile Software Development）

敏捷开发的scrum方法：

每日会议称为scrums，会议由scrum master组织，每个参会人员汇报每日进度，以及下一天的工作。

scrum方法会把工作分成多个短暂的sprints，一个sprint通常占据1到4周时间，每个冲刺结束后，团队都应该能拿出一个功能完整的作品出来。下一个冲刺又会引入新的功能，就这样不停迭代。


上面三个就是软件开发生命周期的三种模型。

### 能力成熟度模型（Capability Maturity Model，CMM）

又称为 SW- CMM、CMM 或 SCMM。

SW-CMM的几个阶段：

等级1：**初始阶段(initial)**，在这个阶段，你经常会发现勤奋的人以杂乱无章的方式冲锋陷阵。通常很少或没有明确的软件开发过程
等级2：**重复（repeatable）**，在此阶段，引入了基本的生命周期管理流程。以有组织的方式重用代码开始出现，并且期望从类似的项目中获得可重复的结果
等级3：**定义(defined)**，在此阶段，软件开发人员根据一组正式的、记录在案的软件开发流程进行操作。所有开发项目都在新的标准化管理模式的约束下进行
等级4：**管理(managed)**，在此阶段，软件流程的管理将进入下一个级别。使用定量措施来详细了解开发过程。
等级5：**优化（optimizing）**，在优化的组织中，会出现一个持续改进的过程。完善的软件开发流程可确保从一个阶段的反馈到达前一阶段，以改善未来的结果

**CMM已经被CMMI代替，CMMI第四阶段称为定量管理（Quantitatively Managed），且侧重于不同阶段间集成。**

### 软件保证成熟度模型（Software Assurance Maturity Model，SAMM）

**软件保障成熟度模型 （SAMM） 是由开放 Web 应用程序安全项目 （OWASP） 维护的开源项目**。它旨在提供一个框架，用于将安全活动集成到软件开发和维护流程中，并为组织提供评估其成熟度的能力。

SAMM 将软件开发过程分为五个业务功能：

- **治理(governance)**：组织为管理软件开发流程采取的行动。此功能包括策略、指标、策略、合规性、教育和指导的实践
- **设计(design)**：组织用于定义软件需求和创建软件的过程。此功能包括威胁建模、威胁评估、安全要求和安全架构的实践。
- **实施(implementation)**：构建和部署软件组件以及管理这些组件中的缺陷的过程。此功能包括安全构建、安全部署和缺陷管理实践。
- **验证(verification)**：组织为确认代码满足业务和安全要求而进行的一组活动。此功能包括架构评估、需求驱动测试和安全测试。
- **运营(operations)**：组织在代码发布后为在整个软件生命周期内维护安全性而采取的行动。此功能包括事件管理、环境管理和运营管理。

![](attachments/Pasted%20image%2020241211112534.png)

### IDEAL 模型

IDEAL模型的五个阶段：

1. **初始阶段（initiating）**： 在 IDEAL 模型的启动阶段，概述了更改背后的业务原因，为该计划建立了支持，并建立了适当的基础设施。
2. **诊断（diagnosing）**： 在诊断阶段，工程师分析组织的当前状态并提出一般性的变革建议
3. **建立（establishing）**： 在建立阶段，组织从诊断阶段获取一般建议，并制定有助于实现这些变化的具体行动计划。
4. **行动（acting）**： 在行动阶段，是时候停止 “说说 ”和 “说到做到 ”了。组织开发解决方案，然后测试、改进和实施它们。
5. **学习（learning）**： 与任何质量改进过程一样，组织必须不断分析其工作以确定它是否实现了预期的目标，并在必要时提出新的行动以使组织重回正轨。

![](attachments/Pasted%20image%2020241211112745.png)
## 甘特图和 PERT（Gantt Charts and PERT）

甘特图是一种条形图，显示项目和进度随时间推移的相互关系。

![](attachments/Pasted%20image%2020250811170527.png)
**计划评审技术(PERT)是一种项目调度工具**，这种工具用于在开发中判断软件产品的规模并为风险评估计算标准偏差(standarddeviation, SD)
## 变更和配置管理

软件投入使用后也会面临各种变更（如新功能、改bug等），因此需要进行变更管理。

- **请求控制**：该过程用户请求软件变更，管理人员执行成本/效益分析，开发人员优化任务。
- **变更控制**：该过程开发人员解决用户需求，开发新功能或修复漏洞。
- **发布控制**：完成新代码的开发后，经过用户验收测试发布到生产环境。


除了变更管理外，软件配置管理也非常重要，用于控制软件版本、跟踪和控制软件配置的变更。

- **配置标识**：管理员文档化组织内容软件产品的配置。
- **配置控制**：确保软件版本的变更符合变更控制和配置管理策略。
- **配置状态统计**：跟踪所有授权变更。
- **配置审计**：定期开展配置审计，确保没有发生未授权配置变更。

## DevOps方法

DevOps方法论旨在将软件开发、质量保证、运维整合到一个完整的模型里。

 ![](attachments/Pasted%20image%2020241211141639.png)

## 应用编程接口

API（Application programming interfaces）方便多个应用之间相互交互。

## 软件测试

**白盒测试（White-Box）**：White- box testing examines the internal logical structures of a program and steps through the code line by line, analyzing the program for poten tial errors. The key attribute of a white-box test is that the testers have access to the source code
**黑盒测试（Black-Box）**：黑盒测试通过提供各种输入场景和检查输出，从用户的角度检查程序。黑盒测试人员无权访问内部代码。在系统交付之前进行的最终验收测试是黑盒测试的一个常见示例。
**灰盒测试（Gray-Box）**：灰盒测试结合了这两种方法，在软件验证中很受欢迎。在这种方法中，测试人员从用户的角度检查软件，分析输入和输出。同时，测试人员也可以通过查看源代码设计他们的测试用例。

## 代码仓库

- 管理好代码仓库的权限
- 不要将敏感信息放在公共代码仓库中，例如API密钥等信息

## 服务等级协议

SLA协议中通常包含以下内容：

- 系统正常运行时间（占总运行时间的百分比）
- 最大连续停机时间（以秒/分钟/等为单位）
- 负载峰值
- 负载平均值
- 技术支持的责任（诊断责任）
- 故障转移时间（如果有冗余）

S**LA协议中会写清楚供应商如果没有达成协议中的条款时的赔偿。**

## 第三方软件采购

- **现成的商业产品（Commercial off-the-shelf，COTS）**：买回软件，自己部署，无论是部署在自己本地服务器上（on premises），还是IaaS环境里。
- **软件及服务（software-as-a-service，SaaS）**：通过 Web 浏览器通过互联网买和交付
- **开源软件（open source software，OSS）**：略

当组织采用某种类型软件时，无论是COTS还是OSS，无论在本地还是云中运行，都应该测试它们是否存在安全漏洞。**组织可以自行测试，也可以依赖供应商提供的测试结果和雇佣第三方进行独立测试**

# 建立数据库和数据仓库

## 数据库管理系统的架构

### 分层和分布式数据库

**分层式数据模型：**

![](attachments/Pasted%20image%2020241211143713.png)
分层式数据库是一对多的，一个父节点可以有0个/1个/多个子节点，但是一个子节点只能有一个父节点。

DNS记录也是属于分层数据模型的。

**分布式数据模型**将数据存储在多个数据库中，但这些数据库在逻辑上是连接的。用户将数据库视为单个实体，即使它由许多通过网络互连的部分组成。每个领域可以有许多孩子和许多父母。因此，分布式数据库的数据映射关系是多对多的

### 关系型数据库


关系型数据库由二维的包含行和列的表格组成。

![](attachments/Pasted%20image%2020241211144522.png)

**表格也被称为关系（relations），表格中的每一行被称为记录（records）。**

Each table contains a number of attributes, or fields. Each attribute corresponds to a column in the table

**关系中的行数称为基数（cardinality），列数是度数（degree）。**

**候选键（Candidate Keys）**：A candidate key is a subset of attributes that can be used to uniquely identify any record in a table
**主键（Primary Keys）**：从表的候选键集中选择一个主键，用于唯一标识表中的记录
**备用键（Alternate Keys）**：任何未被选为主键的候选键都称为备用键。
**外键（Foreign Keys）**：外键用于强制执行两个表之间的关系，也称为引用完整性（referential integrity）。

SQL语句分为两类：

- **DDL(Data definition language)**:允许创建和修改数据库的结构
- **DML(data manipulation language)**:允许用户与该schema包含的数据进行交互

## 数据库事务

- **原子性（Atomicity）**：数据库事务必须是原子的，也就是说，它们必须是 “全有或全无” 的事情。如果事务的任何部分失败，则必须回滚整个事务，就像它从未发生过一样
- **连续性（Consistency）**：所有事务都必须在符合所有数据库规则的环境中开始运行
- **隔离性（Isolation）**：隔离原则要求事务彼此独立运行。
- **持久性（Durability）**：数据库事务必须是持久的。也就是说，一旦它们被提交到数据库，就必须保留它们。数据库通过使用备份机制（如事务日志）来确保持久性

## 多级数据库的安全

将数据与不同的分类级别和/或“因需可知”的要求混合在一起，称为数据库污染（database contamination），是一项重大的安全挑战。

**可以通过视图（views）来实施数据库的多级安全。仅允许用户与受限的视图交互，而不与作为视图基础的原始数据表进行交互。使用视图要比直接查表慢一些。**

### 并发性

缺少并发性控制将会导致以下问题：

- **丢失更新**：两个写入同时发生，例如都执行+1操作，如果没有并发控制，可能得到的结果是11。
- **脏读取**：当进程从没有成功提交的事务中读取记录时，会出现脏读取。返回到我们的商店例子 中，如果接收站开始向数据库写入新的库存记录，但在更新的过程中崩溃，如果事务 未完全回滚，则可能会在数据库中留下部分不正确的信息。

使用“锁”机制确保数据库的并发性。
### 聚合（Aggregation）

SQL 提供了许多函数，这些函数可以组合一个或多个表中的记录以生成可能有用的信息。此过程称为聚合。**聚合并非没有安全漏洞。聚合攻击用于收集大量低级别安全项目或低价值项目，并将它们组合起来以创建具有更高安全级别或价值的东西。换句话说，个人或团体可能能够收集有关系统或从系统中收集多个事实，然后使用这些事实发起攻击**。

### 推理（Inference）

推理攻击带来的数据库安全问题类似于数据聚合威胁带来的数据库安全问题。推理攻击涉及组合几条非敏感信息，以访问应该在更高级别分类的信息。然而，推理利用了人类大脑的推理能力，而不是现代数据库平台的原始数学能力。

举一个经常被引用的推理攻击的例子。一家大公司的会计被允许检索公司在工资上花费 的总额，以用千高层报告，**但不能访问单个员工的工资。会计通常会准备那些带有过去生效 日期的报告，因此可以访问过去一年中任何一天的工资总额。例如，该职员还必须知道不同 员工的雇用日期和终止日期，并有权访问这些信息。这为推理攻击打开了大门。** 如果某个员 工是在某个特定日期雇用的唯一人员，这名会计就可以检索该日期和前一天的工资总额，并 推理出该特定员工的工资（敏感信息），而该信息是不允许他直接访问的。

### 其它安全机制

**多实例（Polyinstantiation）**：在不同分类级别插入不同的内容，以迷惑低安全等级的用户。
**依赖内容的访问控制**：内容相关访问控制基于所访问对象的内容或有效负载。由于必须逐个对象做出决策，因此依赖于内容的控制会增加处理开销。另一种形式的颗粒控制是细胞抑制。单元格隐藏是隐藏单个数据库字段或单元格或对其施加更多安全限制的概念。

**依赖上下文的访问控制**：上下文相关访问控制评估全局以做出访问控制决策

## 开放数据库连接

开放数据库连接 （ODBC） 是一种数据库功能，它允许应用程序与不同类型的数据库进行通信，而无需直接编程以与每种类型的数据库进行交互。**ODBC 充当应用程序和后端数据库驱动程序之间的代理，使应用程序程序员在创建解决方案时有更大的自由度，而不必担心后端数据库系统**

![](attachments/Pasted%20image%2020241211152922.png)

## NoSQL

键值对存储：例如redis、etcd
图形数据库：
文档型数据库：例如mongodb

# 存储威胁

- 无论使用哪种类型的存储，都存在非法访问存储资源的威胁
- 隐蔽通道问题：Covert storage channels allow the transmission of sensitive data between classification levels through the direct or indirect manipulation of shared storage media. This may be as simple as writing sensitive data to an inadvertently shared portion of memory or physical storage
# 了解基于知识的系统

## 专家系统

专家系统试图把人类在某个特殊学科累积的知识具体化，并以一致方式将它们应用于未来的决策。

每个专家系统都有两个主要组件:知识库和推理引擎。

知识库包含专家系统己知的规则。**知识库试图以一系列if/then语句对人类专家的知识进行编码**

专家系统的另一个主要组件是推理引擎，它对知识库中的信息进行分析，从而得到正确的决策。专家系统用户使用一些用户接口将当前环境的具体内容提供给推理引擎，推理引擎使用逻辑推理和模糊逻辑技术的组合，基于过去的经验做出结论



## 机器学习

**机器学习的 核心方法是允许计算机直接从数据中分析和学习，开发和更新活动模型**。机器学习技术分为两大类：

- **监督学习技术使用标记数据进行训练**：。创建机器学习模型的分析者提供一个数据集以及正确的答案，并允许算法开发一个模型，然后该模型可以应用于未来的情况。
- **无监督学习技术使用未标记的数据进行训练**：。提供给算法的数据集不包含"正确"答 案，而要求算法独立地开发模型。

## 神经网络（Neural Networks）

神经网络是机器学习技术的延伸，通常也被称为深度学习或认知系统。



-------

a 
b
c
c
b

b
c
d
a c
c d

c
d
b
a
a

c
d
c
c
b

